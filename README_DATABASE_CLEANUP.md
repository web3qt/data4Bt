# 数据库清理工具使用说明

## 概述

本项目提供了数据库清理工具，用于清空ClickHouse数据库中的所有K线数据。这个工具是独立的，不会在每次运行数据加载器时自动执行。

## 清理的数据表

清理工具会清空以下数据表：
- `klines_1m` - 1分钟K线数据
- `klines_5m` - 5分钟K线数据  
- `klines_15m` - 15分钟K线数据
- `klines_1h` - 1小时K线数据
- `klines_4h` - 4小时K线数据
- `klines_1d` - 1天K线数据

## 使用方法

### 方法一：使用Shell脚本（推荐）

```bash
# 在项目根目录下执行
./clear_database.sh
```

### 方法二：直接运行Go程序

```bash
# 在项目根目录下执行
go run clear_database.go
```

## 安全确认

为了防止误操作，清理工具会要求用户确认：

```
⚠️  警告：此操作将清空数据库中的所有K线数据！
确认要继续吗？(输入 'yes' 确认): 
```

只有输入 `yes` 才会执行清理操作，其他任何输入都会取消操作。

## 使用场景

1. **数据重置**：当需要重新开始数据收集时
2. **测试环境清理**：在测试新功能前清空测试数据
3. **数据修复**：当数据出现问题需要重新导入时
4. **存储空间管理**：释放数据库存储空间

## 注意事项

⚠️ **重要警告**：
- 此操作不可逆，清理后的数据无法恢复
- 请确保在执行前已备份重要数据
- 建议在非生产环境中先测试

## 重新加载数据

清理数据库后，如需重新加载数据，请运行：

```bash
go run cmd/main.go -cmd=run
```

## 配置要求

- 确保 `configs/config.yml` 配置文件存在且正确
- 确保ClickHouse数据库连接正常
- 确保Go环境已正确安装