# Data4BT è„šæœ¬ä½¿ç”¨æŒ‡å—

æœ¬é¡¹ç›®æä¾›äº†ä¸€ç³»åˆ—ä¾¿æ·çš„è„šæœ¬æ¥ç®¡ç† Data4BT ç³»ç»Ÿçš„å¯åŠ¨ã€åœæ­¢å’Œç»´æŠ¤ã€‚

## ğŸ“‹ è„šæœ¬åˆ—è¡¨

### ğŸš€ ä¸€é”®å¯åŠ¨è„šæœ¬ - `start.sh`
å¯åŠ¨å®Œæ•´çš„ Data4BT ç³»ç»Ÿï¼ŒåŒ…æ‹¬ ClickHouse æœåŠ¡å’Œæ•°æ®åº“åˆå§‹åŒ–ã€‚

```bash
./start.sh
```

**åŠŸèƒ½ï¼š**
- æ£€æŸ¥ Docker å’Œ Go ç¯å¢ƒ
- å¯åŠ¨æˆ–æ£€æŸ¥ ClickHouse å®¹å™¨çŠ¶æ€
- æµ‹è¯•æ•°æ®åº“è¿æ¥
- åˆå§‹åŒ–æ•°æ®åº“ç»“æ„
- æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
- æä¾›åç»­æ“ä½œæŒ‡å¼•

### ğŸ›‘ ä¸€é”®åœæ­¢è„šæœ¬ - `stop.sh`
å®‰å…¨åœæ­¢ Data4BT ç³»ç»Ÿçš„æ‰€æœ‰ç›¸å…³è¿›ç¨‹å’ŒæœåŠ¡ã€‚

```bash
./stop.sh
```

**åŠŸèƒ½ï¼š**
- åœæ­¢æ‰€æœ‰ Go ç›¸å…³è¿›ç¨‹
- è¯¢é—®æ˜¯å¦åœæ­¢ ClickHouse å®¹å™¨ï¼ˆè€ƒè™‘åˆ°å¯èƒ½è¢«å…¶ä»–é¡¹ç›®å…±äº«ï¼‰
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- æ£€æŸ¥å‰©ä½™è¿›ç¨‹
- æä¾›æ¸…ç†å»ºè®®

### ğŸ—‘ï¸ æ¸…ç©ºæ•°æ®åº“è„šæœ¬ - `clear_database.sh`
å®‰å…¨æ¸…ç©º data4BT æ•°æ®åº“ä¸­çš„æ‰€æœ‰ Kçº¿æ•°æ®ã€‚

```bash
./clear_database.sh
```

**åŠŸèƒ½ï¼š**
- å®‰å…¨ç¡®è®¤æœºåˆ¶ï¼ˆéœ€è¦è¾“å…¥ 'YES'ï¼‰
- æ£€æŸ¥ ClickHouse è¿æ¥çŠ¶æ€
- æ¸…ç©ºæ‰€æœ‰ Kçº¿æ•°æ®è¡¨
- éªŒè¯æ¸…ç†ç»“æœ
- æä¾›é‡æ–°åŠ è½½æ•°æ®çš„æŒ‡å¼•

**æ¸…ç†çš„æ•°æ®è¡¨ï¼š**
- `klines_1m` - 1åˆ†é’ŸKçº¿æ•°æ®
- `klines_5m` - 5åˆ†é’ŸKçº¿æ•°æ®
- `klines_15m` - 15åˆ†é’ŸKçº¿æ•°æ®
- `klines_1h` - 1å°æ—¶Kçº¿æ•°æ®
- `klines_4h` - 4å°æ—¶Kçº¿æ•°æ®
- `klines_1d` - 1å¤©Kçº¿æ•°æ®
- `symbol_progress` - è¿›åº¦çŠ¶æ€æ•°æ®

### ğŸ“Š çŠ¶æ€æŸ¥çœ‹è„šæœ¬ - `status.sh`
æŸ¥çœ‹ç³»ç»Ÿå’Œæ•°æ®åŠ è½½çŠ¶æ€ã€‚

```bash
# æŸ¥çœ‹æ‰€æœ‰ä»£å¸çŠ¶æ€
./status.sh

# æŸ¥çœ‹è¯¦ç»†çŠ¶æ€
./status.sh -d

# æŸ¥çœ‹ç‰¹å®šä»£å¸çŠ¶æ€
./status.sh BTCUSDT

# æŸ¥çœ‹å¤šä¸ªä»£å¸çŠ¶æ€
./status.sh BTCUSDT,ETHUSDT -d
```

### ğŸ”„ ClickHouse é‡å¯è„šæœ¬ - `restart_clickhouse.sh`
ä¸“é—¨ç”¨äºé‡å¯ ClickHouse å®¹å™¨ã€‚

```bash
./restart_clickhouse.sh
```

## ğŸ”§ ä½¿ç”¨æµç¨‹

### é¦–æ¬¡å¯åŠ¨
```bash
# 1. å¯åŠ¨ç³»ç»Ÿ
./start.sh

# 2. æŸ¥çœ‹çŠ¶æ€
./status.sh

# 3. å¼€å§‹æ•°æ®åŠ è½½
go run cmd/main.go -cmd=run
# æˆ–ä½¿ç”¨å¹¶å‘æ¨¡å¼
go run cmd/main.go -cmd=concurrent
```

### æ—¥å¸¸ä½¿ç”¨
```bash
# æŸ¥çœ‹çŠ¶æ€
./status.sh

# æ›´æ–°åˆ°æœ€æ–°æ•°æ®
go run cmd/main.go -cmd=update-latest

# åœæ­¢ç³»ç»Ÿ
./stop.sh
```

### ç»´æŠ¤æ“ä½œ
```bash
# æ¸…ç©ºæ•°æ®åº“é‡æ–°å¼€å§‹
./clear_database.sh

# é‡å¯ ClickHouse
./restart_clickhouse.sh

# é‡æ–°åˆå§‹åŒ–
./start.sh
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ClickHouse å®¹å™¨å…±äº«**
   - æ ¹æ® `docker-compose.yml`ï¼Œç³»ç»Ÿä½¿ç”¨ç°æœ‰çš„å…±äº« ClickHouse å®¹å™¨
   - åœæ­¢è„šæœ¬ä¼šè¯¢é—®æ˜¯å¦åœæ­¢å®¹å™¨ï¼Œé¿å…å½±å“å…¶ä»–é¡¹ç›®

2. **æ•°æ®å®‰å…¨**
   - æ¸…ç©ºæ•°æ®åº“è„šæœ¬æœ‰å®‰å…¨ç¡®è®¤æœºåˆ¶
   - éœ€è¦è¾“å…¥ 'YES' æ‰èƒ½æ‰§è¡Œæ¸…ç†æ“ä½œ
   - æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…ä½¿ç”¨

3. **ç¯å¢ƒè¦æ±‚**
   - Dockerï¼ˆç”¨äº ClickHouse å®¹å™¨ï¼‰
   - Go 1.19+ï¼ˆç”¨äºè¿è¡Œåº”ç”¨ç¨‹åºï¼‰
   - é…ç½®æ–‡ä»¶ `configs/config.yml` å¿…é¡»å­˜åœ¨

4. **ç½‘ç»œç«¯å£**
   - ClickHouse HTTP: `localhost:8123`
   - ClickHouse Native: `localhost:9000`
   - Web ç•Œé¢: `http://localhost:8123/play`

## ğŸ› æ•…éšœæ’é™¤

### ClickHouse è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps

# é‡å¯ ClickHouse
./restart_clickhouse.sh

# æ£€æŸ¥æ—¥å¿—
docker logs <container_id>
```

### Go è¿›ç¨‹æ— æ³•åœæ­¢
```bash
# æŸ¥æ‰¾è¿›ç¨‹
ps aux | grep "go run"

# æ‰‹åŠ¨æ€æ­»è¿›ç¨‹
kill -9 <pid>
```

### æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat configs/config.yml

# æ£€æŸ¥ ClickHouse è¿æ¥
curl http://localhost:8123/ping

# é‡æ–°åˆå§‹åŒ–
go run cmd/main.go -cmd=init-db
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹è„šæœ¬è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ ClickHouse å®¹å™¨æ—¥å¿—
3. éªŒè¯é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
4. ç¡®ä¿æ‰€æœ‰ä¾èµ–æœåŠ¡æ­£å¸¸è¿è¡Œ

---

**æç¤ºï¼š** æ‰€æœ‰è„šæœ¬éƒ½åŒ…å«è¯¦ç»†çš„çŠ¶æ€è¾“å‡ºå’Œé”™è¯¯å¤„ç†ï¼Œè¯·ä»”ç»†é˜…è¯»è¾“å‡ºä¿¡æ¯ä»¥äº†è§£ç³»ç»ŸçŠ¶æ€ã€‚